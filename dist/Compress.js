export function compress(e,t=9){let r=function(e,t){let r;r=t?t<9?4320*t/9-224:4096:0;let l=e.length,n=0,f=[],o=0;for(;n<l;){o=f.length,f.push(0);for(let t=0;t<8&&!(n>=l);t++){if(r&&n+2<l){let{found:t,foundLength:o}=function(e,t,r,l,n){let f=1,o=0,u=t-n;u<0&&(u=0);let i=t+r;i>l&&(i=l);let h=e[t];for(;u<t&&-1!==(u=e.indexOf(h,u))&&!(u>=t);){let l=u+1,n=t+1;for(;n<i&&e[l]===e[n];)l++,n++;let h=n-t;if(f<h&&(f=h,o=u,f===r))break;u++}return{found:o,foundLength:f}}(e,n,273,l,r);if(o>2){let e=n-t-1;o<18?f.push(e>>8|o-2<<4,255&e):f.push(e>>8,255&e,o-18&255),n+=o;continue}}f[o]|=1<<7-t,f.push(e[n]),n++}}return Buffer.from(f)}(e,t),l=Buffer.alloc(16+r.length);return l.write("Yaz0",0,4),l.writeUInt32BE(e.length,4),r.copy(l,16),l}