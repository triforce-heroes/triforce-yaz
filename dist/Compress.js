export function compress(e,t=9){let r=function(e,t){let r;r=t?t<9?4320*t/9-224:4096:0;let f=e.length,l=0,n=[],o=0;for(;l<f;){o=n.length,n.push(0);for(let t=0;t<8&&!(l>=f);t++){if(r&&l+2<f){let{found:t,foundLength:o}=function(e,t,r,f,l){let n=1,o=0,u=t-l;u<0&&(u=0);let i=t+273;i>f&&(i=f);let h=e[t];for(;u<t;){let r=!1;for(;u<t;u++)if(e[u]===h){r=!0;break}if(!r)break;let f=u+1,l=t+1;for(;l<i&&e[f]===e[l];)f++,l++;let c=l-t;if(n<c&&(n=c,o=u,273===n))break;u++}return{found:o,foundLength:n}}(e,l,273,f,r);if(o>2){let e=l-t-1;o<18?n.push(e>>8|o-2<<4,255&e):n.push(e>>8,255&e,o-18&255),l+=o;continue}}n[o]|=1<<7-t,n.push(e[l]),l++}}return Buffer.from(n)}(e,t),f=Buffer.alloc(16+r.length);return f.write("Yaz0",0,4),f.writeUInt32BE(e.length,4),r.copy(f,16),f}