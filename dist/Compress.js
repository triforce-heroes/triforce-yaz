export function compress(e,t=9){let r=function(e,t){let r;r=t?t<9?4320*t/9-224:4096:0;let l=e.length,f=0,n=[],u=0;for(;f<l;){u=n.length,n.push(0);for(let t=0;t<8&&!(f>=l);t++){let{found:o,foundLength:i}=function(e,t,r,l,f){let n=1,u=0;if(!f)return{found:u,foundLength:n};if(t+2<l){let o=t-f;o<0&&(o=0);let i=t+r;i>l&&(i=l);let h=e[t];for(;o<t&&-1!==(o=e.indexOf(h,o))&&!(o>=t);){let l=o+1,f=t+1;for(;f<i&&e[l]===e[f];)l++,f++;let h=f-t;if(n<h&&(n=h,u=o,n===r))break;o++}}return{found:u,foundLength:n}}(e,f,273,l,r);if(i>2){let e=f-o-1;i<18?n.push(e>>8|i-2<<4,255&e):n.push(e>>8,255&e,i-18&255),f+=i}else n[u]|=1<<7-t,n.push(e[f]),f++}}return Buffer.from(n)}(e,t),l=Buffer.alloc(16+r.length);return l.write("Yaz0",0,4),l.writeUInt32BE(e.length,4),r.copy(l,16),l}